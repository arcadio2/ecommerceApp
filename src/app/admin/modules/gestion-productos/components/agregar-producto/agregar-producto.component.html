
  <div  class="mx-3 px-2 border-b-2 border-black text-center">
    <p class="font-semibold text-black text-center">Agregar producto</p>

  </div>
  <mat-dialog-content>
    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
      <div class="flex gap-4">
      <!-- <div> -->


        <div class="flex items-center flex-col w-1/2">
          <form  [formGroup]="agregarProductoForm" enctype="multipart/form-data">
          <label class="relative block w-full overflow-hidden border-b border-black bg-transparent pt-3 ">
            <input type="text" formControlName="nombre" placeholder="Nombre"
                   class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm" />

            <span
              class="absolute start-0 top-2 -translate-y-1/2 text-xs text-gray-700 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-2 peer-focus:text-xs">
              Nombre
            </span>
          </label>
          <label for="Description" class="relative block w-full overflow-hidden border-b border-black bg-transparent pt-6 mt-2 ">
              <textarea id="Description" placeholder="Descripcion"

                        class="mt-3 peer w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"
                        matInput
                        cdkTextareaAutosize
                        #autosize="cdkTextareaAutosize"
                        cdkAutosizeMinRows="1"
                        cdkAutosizeMaxRows="5"
                        formControlName="descripcion"
              ></textarea>

            <span class="absolute start-0 top-2 -translate-y-1/2 text-xs text-gray-700 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-5 peer-focus:text-xs">
                Descripción
              </span>
          </label>
          <label  class="relative block w-full overflow-hidden border-b border-black bg-transparent pt-3 mt-3 ">
            <input type="number" formControlName="precio" placeholder="Precio" class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm" />

            <span class="absolute start-0 top-2 -translate-y-1/2 text-xs text-gray-700 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-2 peer-focus:text-xs">
              Precio
            </span>
          </label>
    <!--       <label class="relative block w-full overflow-hidden border-b border-black bg-transparent pt-3 mt-3 ">
            <input type="number" formControlName="stock" placeholder="Stock"
                   class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm" />

            <span
              class="absolute start-0 top-2 -translate-y-1/2 text-xs text-gray-700 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-2 peer-focus:text-xs">
              Stock
            </span>
          </label> -->

          <div class="grid grid-cols-3 text-sm w-full mt-3 gap-3">
            <div class="text-xs text-gray-700">
              Selecciona el catálago
            </div>
            <div class="col-span-2 flex flex-col gap-3">
              <select class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md block w-full p-3"
                (change)="cambiarCategoria($event)" formControlName="sexo">
                <option selected value="0" class="font-sm" >Hombre</option>
                <option value="1" class="font-sm">Mujer</option>
              </select>
              <select (change)="cambiarTalla($event)" formControlName="tipoRopa"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md block w-full p-3"
                >

                <option *ngFor="let tipo of categoriasSeleccionables" class="font-sm"
                  [value]="tipo.tipo"
                  >
                  <span >{{tipo.tipo}}</span>
                </option>
              </select>
            </div>
          </div>


          <div class="mt-3 w-full pt-3">
            <p class="font-semibold text-black text-center">Variante</p>
            <fieldset>
              <legend class="mb-1 text-sm font-medium">Color</legend>

              <div class="flex flex-wrap gap-1">
                <div class="flex flex-wrap w-full justify-around gap-1 [&:hover_label]:opacity-75">
                  <div *ngFor="let color of coloresDisponibles; let i=index">
                    <input type="checkbox" id="ColorSg+{{i}}" class="sr-only" formControlName="color" />

                    <label for="ColorSg"
                          (click)="cambiarColor(color)"
                           class="block h-6 w-6 cursor-pointer rounded-full bg-[{{color.hexadecimal}}] transition hover:!opacity-100">
                      <span class="sr-only"> {{color.color}} </span>
                    </label>
                  </div>
                </div>
              </div>
            </fieldset>
            <fieldset class="mt-4">
              <legend class="mb-1 text-sm font-medium">Selecciona las tallas que quieres añadir</legend>

              <div class="flex flex-wrap justify-around gap-1">
                <label for="size_xs{{i}}" class="cursor-pointer" *ngFor="let talla of tallasSeleccionables; let i=index"
                  >
                  <input type="checkbox" name="size" id="size_xs{{i}}" class="peer sr-only" (click)="anadirTalla(talla)"/>

                  <span
                    class="group inline-flex h-8 w-8 items-center justify-center border text-xs font-medium peer-checked:bg-black peer-checked:text-white">
                                                {{talla.talla}}
                                            </span>


                </label>



                <div>
                  <input type="button" id="ColorSb" class="sr-only" />

                  <span class="material-symbols-outlined cursor-pointer h-8 w-8">
                                                add_box
                                            </span>
                </div>
              </div>
            </fieldset>
            <div class="flex mt-4 flex-col gap-3 w-full">
              <label for="inputGroupFile04" class="custom-file-upload">
                Selecciona imagen
              </label>
              <input (change)="seleccionarFoto($event)" type="file"
                     multiple
                     formControlName="foto" pInputText id="file-upload"
                     id="inputGroupFile04"
                     aria-describedby="inputGroupFileAddon04"
                     class="file-input w-full max-w-xs file-input-ghost file-input-sm "
              >

            </div>
          </div>
          </form>
        </div>
        <div class="flex flex-col p-3 w-1/2">
          <span class="text-center">
            En esta sección podrás editar el stock para cada combinación talla-color que hayas seleccionado
          </span>
          <div *ngIf="colorSeleccionado" class="flex mt-4 flex-col gap-3">
            Color seleccionado:
            <input type="checkbox" id="ColorSgSelected" class="sr-only" />

            <label for="ColorSg"

                   class="p-3 mt-3 block h-6 w-6 cursor-pointer rounded-full bg-[{{colorSeleccionado.hexadecimal}}] transition hover:!opacity-100">
              <span class="sr-only"> {{colorSeleccionado.color}} </span>
            </label>
            <div class="flex flex-wrap gap-1"  *ngFor="let talla of tallasSeleccionadas; let i=index">
                <div class="flex">
                  <label  class="cursor-pointer p-3 mt-2">
                    <input type="checkbox" name="size"  class="peer sr-only"  checked disabled/>

                    <span
                      class="group inline-flex h-8 w-8 items-center justify-center border text-xs font-medium peer-checked:bg-black peer-checked:text-white">
                                                  {{talla.talla}}
                                              </span>
                  </label>
                  <label class="relative block w-full overflow-hidden border-b border-black bg-transparent pt-3 mt-3 ">
                    <input type="number" min="0"  placeholder="Stock " [(ngModel)]="stockSeleccionados[i]"
                           class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm" />

                    <span
                      class="absolute start-0 top-2 -translate-y-1/2 text-xs text-gray-700 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-2 peer-focus:text-xs">
                      Stock para talla {{talla.talla}}
                    </span>
                  </label>
                </div>
       
                <img [src]="imagenPrevisualizada  [0]" alt="Previsualización de la imagen">
               
              </div>


          </div>
        </div>
        <!--<div>

          <img alt="Les Paul"
               src="https://media.paulsmith.com/dam/products/w_600,c_scale/q_80/MODEL/ECOM/M1R/M1R-2173-K02013-60/M1R-2173-K02013-60/M1R-2173-K02013-60_3.jpg"
               class="aspect-[5/7] w-full object-cover" />
        </div>-->
      </div>
    </div>

  </mat-dialog-content>
<!-- Fin modal -->
  <mat-dialog-actions align="center">
    <button class="group relative inline-block overflow-hidden border bg-black border-black px-8 py-3 focus:outline-none focus:ring mx-2"
            (click)="registrarNuevoProducto()"

    >
      <span class="absolute inset-y-[97%] left-0 bottom-0 w-[2px] bg-white transition-all group-hover:w-full group-active:bg-white"></span>

      <span class="relative text-sm font-medium text-white transition-colors  text-center">
          Guardar Cambios
        </span>
    </button>
    <button class="group relative inline-block overflow-hidden border border-black px-8 py-3 focus:outline-none focus:ring mx-2"
            (click)="cancelar()"
            [disabled]="loading"
    >
      <span class="absolute inset-y-[97%] left-0 bottom-0 w-[2px] bg-black transition-all group-hover:w-full group-active:bg-white"></span>

      <span class="relative text-sm font-medium text-black transition-colors text-center">
          Cancelar
        </span>
    </button>
  </mat-dialog-actions>
